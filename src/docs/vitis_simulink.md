# Simulink Support

## Vitis Specific Simulink
* Partitions: A subsystem can be denoted as a partition by placing a constant block inside the subsystem and naming it 
  ```VITIS_PARTITION```.  The name of the block indicates the partition number.  Note that the I/O partition is always 
  - The constant can be attached to a terminator block and will be pruned away by vitis before C code generation.

## Limited Support:
* Vectors: Vector operations are currently expanded by the simulink to GraphML export script into primitive (width 1) operations.  Vector ports are not yet supported.

## Simulink Export Only Support
* Fixed Point numbers are only supported by the simulink export script.  Fixed point operations are not yet implemented 
  vitis.

## Supported Simulink Blocks:
*\*Note: Parameter restrictions for each node have not yet been documented below.*

### Primitives
Simulink Block Type         | Vitis Block Type        | Vitis Restrictions
--------------------------- | ----------------------- | ------------------
Subsystem                   | SubSystem               | *
Enabled Subsystem           | EnabledSubSystem        | Input & Output Ports Converted to Enable Input & Output Ports
Constant                    | Constant                | Also used for partition declaration with name ```VITIS_PARTITION```.
Input Port                  | MasterInput             | There is a single master shared by all system level inputs.  Converted to EnableInput if part of an enabled subsystem.  If at subsystem level, not converted
Output Port                 | MasterOutput            | There is a single master shared by all system level outputs.  Converted to EnableOutput if part of an enabled subsystem.  If at subsystem level, not converted
Terminator                  | MasterOutput.           | There is a single master shared by all terminators
Relational Operator         | Compare                 | *
Lookup_n-D                  | LUT                     | *
Delay                       | Delay                   | *
Complex to Real-Imag        | ComplexToRealImag       | *
Real-Imag to Complex        | RealImagToComplex       | *
Sum                         | Sum                     | *
Product                     | Product                 | *
Selector                    | (Expanded by Export)    | *
Logic                       | LogicalOperator         | *
Data Type Propagation       | UnsupportedSink         | Exports only but has no effect
Data Type Conversion        | DataTypeConversion      | *
Data Type Duplicate         | DataTypeDuplicate       | Only enforces the constraint that the inputs have the same type
Stateflow FSM               | SimulinkCoderFSM        | Implemented as a BlackBox from C code generated by Matlab/Simulink for the FSM
Bitwise Operator            | BitwiseOperator         | *
Trigonometry Operator       | Sin, Cos, Atan, Atan2   | *
Math                        | Ln, Exp                 | *

### Medium Level
Simulink Block Type         | Vitis Block Type        | Vitis Restrictions
--------------------------- | ----------------------- | ------------------
Gain                        | Gain                    | *
Compare to Constanty        | CompareToConstant       | *
Threshold Switch            | ThresholdSwitch         | *
Multiport Switch            | SimulinkMultiPortSwitch | *
Saturate                    | Saturate                | *
NCO                         | NCO                     | *
BPSK Modulator              | DigitalModulator        | *
QPSK Modulator              | DigitalModulator        | *
Rectangular QAM Modulator   | DigitalModulator        | *
BPSK Demodulator            | DigitalDemodulator      | *
QPSK Demodulator            | DigitalDemodulator      | *
Rectangular QAM Demodulator | DigitalDemodulator      | *

### High Level
Simulink Block Type         | Vitis Block Type        | Vitis Restrictions
--------------------------- | ----------------------- | ------------------
Discrete FIR                | DiscreteFIR             | Expanded by Simulink Export
Tapped Delay                | TappedDelay             | *


